
<!-- $Id: article_info.htm 16780 2009-11-09 09:28:30Z sxc_shop $ -->
{include file="pageheader.htm"}
{insert_scripts files="../js/utils.js,selectzone.js,validator.js"}
<!-- start goods form -->
<div class="tab-div">
  <div id="tabbar-div">
    <p>
      <span class="tab-front" id="general-tab">{$lang.tab_general}</span><!-- <span
      class="tab-back" id="detail-tab">{$lang.tab_content}</span><span
      class="tab-back" id="goods-tab">{$lang.tab_goods}</span> -->
    </p>
  </div>

  <div id="tabbody-div">
    <form  action="poster.php" method="post" enctype="multipart/form-data" name="theForm" onsubmit="return validate();">
    <table width="90%" id="general-table">
      <tr>
        <td class="narrow-label">海报标题</td>
        <td><input type="text" name="title" size ="40" maxlength="60" value="{$poster.title|escape}" />{$lang.require_field}</td>
      </tr>          
      <!-- {if $poster.cat_id >= 0} -->
      <tr>
        <td class="narrow-label">{$lang.cat} </td>
        <td>
          <select name="cat_id" onchange="catChanged()">
            <option value="0">{$lang.select_plz}</option>
            {$cat_select}
          </select>
         {$lang.require_field}</td>
      </tr>
      <!-- {else} -->
      <input type="hidden" name="poster_cat" value="-1" />
      <!-- {/if} -->
      {if $poster.cat_id >= 0}
      
      <tr>
        <td class="narrow-label">{$lang.is_open}</td>
        <td>
        <input type="radio" name="is_open" value="1" {if $poster.is_open eq 1}checked{/if}> {$lang.isopen}
      <input type="radio" name="is_open" value="0" {if $poster.is_open eq 0}checked{/if}> {$lang.isclose}{$lang.require_field}        </td>
      </tr>
      {else}
      <tr style="display:none">
      <td colspan="2"><input type="hidden" name="poster_type" value="0" /><input type="hidden" name="is_open" value="1" /></td>
      </tr>
      {/if}
      <tr>
        <td class="narrow-label">阅读量</td>
        <td><input type="text" name="click_count" maxlength="60" value="{$poster.click_count|escape}"></td>
      </tr>
      <tr>
        <td class="narrow-label">排序</td>
        <td><input type="text" name="sort" maxlength="60" value="{$poster.sort|default:100}"></td>
      </tr>
      <!-- <tr>
        <td class="narrow-label">{$lang.author}</td>
        <td><input type="text" name="author" maxlength="60" value="{$poster.author|escape}" /></td>
      </tr> -->
      <tr>
        <td class="narrow-label">跳转标题</td>
        <td><input type="text" name="target_title" maxlength="60" value="{$poster.target_title|escape}"></td>
      </tr>
      <tr>
        <td class="narrow-label">跳转链接</td>
        <td><input type="text" name="target" maxlength="255" value="{$poster.target|escape}"></td>
      </tr>
      
      
     
      <tr>
        <td class="narrow-label">上传主背景图</td>
        <td><input type="file" name="file">
          <span class="narrow-label">{$lang.file_url}
          <input name="file_url" type="text" value="{$poster.file_url|escape}" size="30" maxlength="255" />
          </span>
          </td>
      </tr>
      <tr>
        <td class="narrow-label">背景图的二维码的定位l</td>
        <td><input type="text" name="qrcode_l" maxlength="60" value="{$poster.qrcode_l|default:576}" /></td>
      </tr>
      <tr>
        <td class="narrow-label">背景图的二维码的定位t</td>
        <td><input type="text" name="qrcode_t" maxlength="60" value="{$poster.qrcode_t|default:1078}" /></td>
      </tr>
      <tr>
        <td class="narrow-label">背景图的二维码的定位w</td>
        <td><input type="text" name="qrcode_w" maxlength="60" value="{$poster.qrcode_w|default:132}" /></td>
      </tr>
      <tr>
        <td class="narrow-label">背景图的二维码的定位h</td>
        <td><input type="text" name="qrcode_h" maxlength="60" value="{$poster.qrcode_h|default:132}" /></td>
      </tr>
      <tr>
        <td class="narrow-label">背景图的二维码的链接</td>
        <td><input name="link_url" type="text" id="link_url" value="http://" maxlength="60"></td>
      </tr>
      <tr>
        <td class="narrow-label">细节图1</td>
        <td><input type="file" name="file1">
         <span class="narrow-label">{$lang.file_url1}
          <input name="file_url1" type="text" value="{$posterimglist[0].src|escape}" size="30" maxlength="255" />
          </span>
        
        <td>图片的左定位<input type="text" name="img_l1" maxlength="60" value="{$posterimglist[0].img_l|default:30}" /></td>
        <td>图片的top定位<input type="text" name="img_t1" maxlength="60" value="{$posterimglist[0].img_t|default:1080}" /></td>
        <td>图片的换行高度<input type="text" name="img_w1" maxlength="60" value="{$posterimglist[0].img_w|default:120}" /></td>
        <td>图片的换行宽度<input type="text" name="img_h1" maxlength="60" value="{$posterimglist[0].img_h|default:120}" /></td>
        <td>图片是否圆形裁切<input type="text" name="img_circle1" maxlength="60" value="{$posterimglist[0].img_circle|default:1}" /></td>
        
         </td>
      </tr>

      <tr>
        <td class="narrow-label">细节图2</td>
        <td><input type="file" name="file2">
         <span class="narrow-label">{$lang.file_url2}
          <input name="file_url2" type="text" value="{$posterimglist[1].src|escape}" size="30" maxlength="255" />
          </span>
        
        <td>图片的左定位2<input type="text" name="img_l2" maxlength="60" value="{$posterimglist[1].img_l}" /></td>
        <td>图片的top定位2<input type="text" name="img_t2" maxlength="60" value="{$posterimglist[1].img_t}" /></td>
        <td>图片的换行高度2<input type="text" name="img_w2" maxlength="60" value="{$posterimglist[1].img_w}" /></td>
        <td>图片的换行宽度2<input type="text" name="img_h2" maxlength="60" value="{$posterimglist[1].img_h}" /></td>
        <td>图片是否圆形裁切2<input type="text" name="img_circle2" maxlength="60" value="{$posterimglist[1].img_circle}" /></td>
         </td>
      </tr>
      <tr>
        <td class="narrow-label">细节图3</td>
        <td><input type="file" name="file3">
          <span class="narrow-label">{$lang.file_url3}
          <input name="file_url3" type="text" value="{$posterimglist[2].src|escape}" size="30" maxlength="255" />
          </span>
        
        <td>图片的左定位3<input type="text" name="img_l3" maxlength="60" value="{$posterimglist[2].img_l}" /></td>
        <td>图片的top定位3<input type="text" name="img_t3" maxlength="60" value="{$posterimglist[2].img_t}" /></td>
        <td>图片的换行高度3<input type="text" name="img_w3" maxlength="60" value="{$posterimglist[2].img_w}" /></td>
        <td>图片的换行宽度3<input type="text" name="img_h3" maxlength="60" value="{$posterimglist[2].img_h}" /></td>
        <td>图片是否圆形裁切3<input type="text" name="img_circle3" maxlength="60" value="{$posterimglist[2].img_circle}" /></td>
         </td>
      </tr>
      <tr></tr>
      <tr>
       
        <td>
        <td>文本区域文字1<input type="text" name="text1" maxlength="60" value="{$postertextarea[0].text|default:手机扫一扫，开启更多精彩}" /></td>
        <td>文本的左定位1<input type="text" name="text_l1" maxlength="60" value="{$postertextarea[0].text_l|default:170}" /></td>
        <td>文本的top定位1<input type="text" name="text_t1" maxlength="60" value="{$postertextarea[0].text_t|default:1220}" /></td>
        <td>文本的font1<input type="text" name="font1" maxlength="60" value="{$postertextarea[0].text_font|default:30px 微软雅黑}" /></td>
        <td>文本的style1<input type="text" name="style1" maxlength="60" value="{$postertextarea[0].text_style|default:#333333}" /></td>
        <td>文本的换行高度1<input type="text" name="text_w1" maxlength="60" value="{$postertextarea[0].text_w|default:390}" /></td>
        <td>文本的换行宽度1<input type="text" name="text_h1" maxlength="60" value="{$postertextarea[0].text_h|default:60}" /></td>
        </td>
      </tr>
      <tr>
        <td>
        <td>文本区域文字2<input type="text" name="text2" maxlength="60" value="{$postertextarea[1].text}" /></td>
        <td>文本的左定位2<input type="text" name="text_l2" maxlength="60" value="{$postertextarea[1].text_l}" /></td>
        <td>文本的top定位2<input type="text" name="text_t2" maxlength="60" value="{$postertextarea[1].text_t}" /></td>
         <td>文本的font2<input type="text" name="font2" maxlength="60" value="{$postertextarea[1].text_font}" /></td>
        <td>文本的style2<input type="text" name="style2" maxlength="60" value="{$postertextarea[1].text_style}" /></td>
        <td>文本的换行高度2<input type="text" name="text_w2" maxlength="60" value="{$postertextarea[1].text_w}" /></td>
        <td>文本的换行宽度2<input type="text" name="text_h2" maxlength="60" value="{$postertextarea[1].text_h}" />
        </td>
      </tr>
      <tr>
        <td>
        <td>文本区域文字3<input type="text" name="text3" maxlength="60" value="{$postertextarea[2].text}" /></td>
        <td>文本的左定位3<input type="text" name="text_l3" maxlength="60" value="{$postertextarea[2].text_l}" /></td>
        <td>文本的top定位3<input type="text" name="text_t3" maxlength="60" value="{$postertextarea[2].text_t}" /></td>
         <td>文本的font3<input type="text" name="font3" maxlength="60" value="{$postertextarea[2].text_font}" /></td>
        <td>文本的style3<input type="text" name="style3" maxlength="60" value="{$postertextarea[2].text_style}" /></td>
        <td>文本的换行高度3<input type="text" name="text_w3" maxlength="60" value="{$postertextarea[2].text_w}" /></td>
        <td>文本的换行宽度3<input type="text" name="text_h3" maxlength="60" value="{$postertextarea[2].text_h}" />
        </td>
      </tr>
    </table>

 
    <div class="button-div">
      <input type="hidden" name="act" value="{$form_action}" />
      <input type="hidden" name="old_title" value="{$poster.title}"/>
      <input type="hidden" name="id" value="{$poster.poster_id}" />
      <input type="submit" value="{$lang.button_submit}" class="button"  />
      <input type="reset" value="{$lang.button_reset}" class="button" />
    </div>
    </form>
  </div>

</div>
<!-- end goods form -->
<script language="JavaScript">

var articleId = {$article.article_id|default:0};
var elements  = document.forms['theForm'].elements;
var sz        = new SelectZone(1, elements['source_select'], elements['target_select'], '');

{literal}
onload = function()
{
  // 开始检查订单
  startCheckOrder();
}

function validate()
{
  var validator = new Validator('theForm');
  validator.required('title', no_title);
{/literal}
{if $article.cat_id >= 0}
  validator.isNullOption('article_cat',no_cat);
{/if}
{literal}

  return validator.passed();
}

document.getElementById("tabbar-div").onmouseover = function(e)
{
    var obj = Utils.srcElement(e);

    if (obj.className == "tab-back")
    {
        obj.className = "tab-hover";
    }
}

document.getElementById("tabbar-div").onmouseout = function(e)
{
    var obj = Utils.srcElement(e);

    if (obj.className == "tab-hover")
    {
        obj.className = "tab-back";
    }
}

document.getElementById("tabbar-div").onclick = function(e)
{
    var obj = Utils.srcElement(e);

    if (obj.className == "tab-front")
    {
        return;
    }
    else
    {
        objTable = obj.id.substring(0, obj.id.lastIndexOf("-")) + "-table";

        var tables = document.getElementsByTagName("table");
        var spans  = document.getElementsByTagName("span");

        for (i = 0; i < tables.length; i++)
        {
            if (tables[i].id == objTable)
            {
                tables[i].style.display = (Browser.isIE) ? "block" : "table";
            }
            else
            {
                tables[i].style.display = "none";
            }
        }
        for (i = 0; spans.length; i++)
        {
            if (spans[i].className == "tab-front")
            {
                spans[i].className = "tab-back";
                obj.className = "tab-front";
                break;
            }
        }
    }
}

function showNotice(objId)
{
    var obj = document.getElementById(objId);

    if (obj)
    {
        if (obj.style.display != "block")
        {
            obj.style.display = "block";
        }
        else
        {
            obj.style.display = "none";
        }
    }
}

function searchGoods()
{
    var elements  = document.forms['theForm'].elements;
    var filters   = new Object;

    filters.cat_id = elements['cat_id'].value;
    filters.brand_id = elements['brand_id'].value;
    filters.keyword = Utils.trim(elements['keyword'].value);

    sz.loadOptions('get_goods_list', filters);
}
{/literal}

/**
 * 选取上级分类时判断选定的分类是不是底层分类
 */
function catChanged()
{
  var obj = document.forms['theForm'].elements['article_cat'];

  cat_type = obj.options[obj.selectedIndex].getAttribute('cat_type');
  if (cat_type == undefined)
  {
    cat_type = 1;
  }

  if ((obj.selectedIndex > 0) && (cat_type == 2 || cat_type == 4))
  {
    alert(not_allow_add);
    obj.selectedIndex = 0;
    return false;
  }

  return true;
}
</script>
{include file="pagefooter.htm"}